# just use fish
set-option -g default-shell /home/linuxbrew/.linuxbrew/bin/fish

# Set the prefix to ^A.
unbind C-b
set -g prefix ^A
bind a send-prefix

# :new<CR>  new session
# s  list sessions
# L  last session
# $  name session
# ,  name window
# d  detach
# D  kill other connection
# t  big clock
# ?  list shortcuts
# :  prompt

# other ^A
unbind ^A
bind ^A last-window

# kill k
unbind k
bind k confirm-before "kill-window"

# w  list windows
# ,  name window
# &  kill window
# m  swap window
bind m command-prompt -p "swap window with:" "swap-window -t '%%'"

# new in cur dir
bind c new-window -c "#{pane_current_path}"

# split -v |
unbind |
bind | split-window -h -c "#{pane_current_path}"
bind _ split-window -c "#{pane_current_path}"

# o  switch panes
# ;  last pane
# q  show pane numbers
# x  kill pane
# +  break pane into window (e.g. to select text by mouse to copy)
# -  restore pane from window
# ⍽  space - toggle between layouts
# {  Move the current pane left
# }  Move the current pane right
# z  toggle pane zoom
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# windows
bind -n M-p previous-window
bind -n M-n next-window
bind -n M-1 select-window -t 1
bind -n M-2 select-window -t 2
bind -n M-3 select-window -t 3
bind -n M-4 select-window -t 4
bind -n M-5 select-window -t 5
bind -n M-6 select-window -t 6
bind -n M-7 select-window -t 7
bind -n M-8 select-window -t 8
bind -n M-9 select-window -t 9

# vi
setw -g mode-keys vi

# clipboard
set -g set-clipboard on
bind -T copy-mode-vi v send -X begin-selection
# =  choose-buffer

# mouse
# tmux >= 2.4
setw -g mouse on
bind -T copy-mode-vi WheelUpPane send -X scroll-up
bind -T copy-mode-vi WheelDownPane send -X scroll-down

# general
#setw -g utf8 on  # drop since 2.2
#set -g status-utf8 on
set -g base-index 1
set -s escape-time 0
setw -g pane-base-index 1
set -g default-terminal "xterm-256color"
set -as terminal-overrides ',*:Tc:Smulx=\E[4::%p1%dm:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m'
set -g history-limit 65535
#setw -g aggressive-resize on  # disable for iterm2
#set -g renumber-windows on  # after kill

# toggle status bar
bind b set-option -g status
# set-option -g status-position top
BG="#21202e"
FG="#edecee"
set -g status-interval 5
set -g status-style fg=$FG,bg=$BG
set -g window-status-style fg=$FG,dim
set -g window-status-current-style fg=$FG
set -g status-right-length 60
# set -g status-right "#[fg=green] %H:%M "
# set -g status-right "#[fg=blue]#(cut -d ' ' -f 1-3 /proc/loadavg) #[fg=green]• %H:%M "
set -g status-right "#[fg=blue]#(sysctl -n vm.loadavg | cut -d ' ' -f 2-4) #[fg=green]• %H:%M "
